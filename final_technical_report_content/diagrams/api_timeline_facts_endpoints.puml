@startuml Timeline and Facts API Endpoints
!theme aws-orange
title ChronicleTree Timeline & Facts Management API Endpoints

left to right direction

package "Timeline Items (Nested under People)" {
  [GET /api/v1/people/:id/timeline_items] as GetPersonTimeline
  [POST /api/v1/people/:id/timeline_items] as CreateTimelineItem
}

package "Timeline Items (Direct Management)" {
  [PUT /api/v1/timeline_items/:id] as UpdateTimelineItem
  [DELETE /api/v1/timeline_items/:id] as DeleteTimelineItem
}

package "Custom Facts (Nested under People)" {
  [GET /api/v1/people/:id/facts] as GetPersonFacts
  [POST /api/v1/people/:id/facts] as CreateFact
}

package "Custom Facts (Direct Management)" {
  [PUT /api/v1/facts/:id] as UpdateFact
  [DELETE /api/v1/facts/:id] as DeleteFact
}

' Timeline management flow
GetPersonTimeline --> CreateTimelineItem : "Add Life Event"
CreateTimelineItem --> UpdateTimelineItem : "Edit Event Details"
UpdateTimelineItem --> GetPersonTimeline : "View Updated Timeline"
GetPersonTimeline --> DeleteTimelineItem : "Remove Event"

' Facts management flow
GetPersonFacts --> CreateFact : "Add Custom Fact"
CreateFact --> UpdateFact : "Edit Fact Details"
UpdateFact --> GetPersonFacts : "View Updated Facts"
GetPersonFacts --> DeleteFact : "Remove Fact"

note top of GetPersonTimeline : "GET /api/v1/people/:id/timeline_items\n• Returns person's life events\n• Ordered by date\n• Includes title, description, date, place, icon"

note bottom of CreateTimelineItem : "POST /api/v1/people/:id/timeline_items\n• Creates new timeline event\n• Associates with person\n• Validates required fields"

note left of GetPersonFacts : "GET /api/v1/people/:id/facts\n• Returns person's custom facts\n• Label-value pairs\n• Optional date and location\n• Flexible genealogical data"

note right of CreateFact : "POST /api/v1/people/:id/facts\n• Creates custom fact\n• Flexible label-value format\n• Optional temporal data\n• Extensible information system"

@enduml
