@startuml Authentication API Endpoints
!theme aws-orange
title ChronicleTree Authentication API Endpoints (Devise-JWT)

left to right direction

package "Devise Authentication" {
  [POST /api/v1/auth] as Register
  [POST /api/v1/auth/sign_in] as SignIn
  [DELETE /api/v1/auth/sign_out] as SignOut
}

package "Password Management" {
  [POST /api/v1/auth/password] as ResetPassword
  [PUT /api/v1/auth/password] as UpdatePassword
}

' Authentication flow
Register --> SignIn : Account Created
SignIn --> SignOut : JWT Session
ResetPassword --> UpdatePassword : Password Reset Flow

note right of Register : "POST /api/v1/auth\n• Creates new user account\n• Validates email and password\n• Returns JWT token via cookie\n• Uses RegistrationsController"

note right of SignIn : "POST /api/v1/auth/sign_in\n• User login with email/password\n• JWT token issued automatically\n• Handled by SessionsController\n• Sets authentication cookie"

note right of SignOut : "DELETE /api/v1/auth/sign_out\n• Ends user session\n• Invalidates JWT token\n• Returns no_content status\n• Clears authentication"

note bottom of ResetPassword : "POST /api/v1/auth/password\n• Initiates password reset\n• Sends reset email\n• Creates reset token\n• Devise passwords controller"

note bottom of UpdatePassword : "PUT /api/v1/auth/password\n• Updates user password\n• Requires reset token\n• Validates new password\n• Invalidates old sessions"

@enduml
