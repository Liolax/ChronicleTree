<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChronicleTree - Architecture Diagrams</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .gradient-header {
            background: linear-gradient(135deg, #4F46E5 0%, #8B5CF6 100%);
        }
        .section-title-icon {
            width: 32px;
            height: 32px;
            margin-right: 12px;
            color: #4F46E5;
        }
        .header-icon {
             width: 40px;
            height: 40px;
            margin-right: 16px;
        }
        .component-icon {
            width: 24px;
            height: 24px;
            margin-right: 8px;
        }
        .table-icon, .relationship-icon, .api-icon, .flow-icon {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            vertical-align: middle;
        }
        .http-method {
            min-width: 70px;
        }
        /* Code Samples Styling */
        pre {
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        code {
            color: #2c3e50;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">
    <div class="container mx-auto max-w-6xl my-12 bg-white rounded-2xl shadow-2xl overflow-hidden">
        <header class="gradient-header text-white p-8 sm:p-12 text-center">
            <h1 class="text-4xl sm:text-5xl font-bold flex items-center justify-center">
                <svg class="header-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z" />
                </svg>
                ChronicleTree Architecture
            </h1>
            <p class="mt-2 text-lg opacity-90">A visual guide to the system, database, and API design.</p>
        </header>
        
        <main class="p-6 sm:p-10 space-y-12">

            <!-- System Architecture -->
            <section>
                <h2 class="text-3xl font-bold text-gray-800 flex items-center border-b-2 border-indigo-200 pb-3 mb-6">
                    <svg class="section-title-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z" /></svg>
                    System Architecture Overview
                </h2>
                <div class="bg-gray-50 p-6 rounded-xl border border-gray-200">
                    <div class="flex flex-col md:flex-row items-center justify-around gap-8 text-center">
                        <div class="bg-white p-6 rounded-xl shadow-md border w-full md:w-1/4 transform hover:scale-105 transition-transform">
                            <h3 class="text-xl font-semibold text-indigo-600 flex items-center justify-center">
                                <svg class="component-icon" fill="#61DAFB" viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="2"/>
                                    <path d="M20.2,15.7L20.2,15.7C20.2,16.8 18.5,17.9 16.1,18.7C16.5,20.3 16.2,21.4 15.4,21.9C15.1,22.1 14.7,22.2 14.3,22.2C13.5,22.2 12.6,21.6 11.8,20.5C11,21.6 10.1,22.2 9.3,22.2C8.9,22.2 8.5,22.1 8.2,21.9C7.4,21.4 7.1,20.3 7.5,18.7C5.1,17.9 3.4,16.8 3.4,15.7C3.4,14.6 5.1,13.5 7.5,12.7C7.1,11.1 7.4,10 8.2,9.5C8.5,9.3 8.9,9.2 9.3,9.2C10.1,9.2 11,9.8 11.8,10.9C12.6,9.8 13.5,9.2 14.3,9.2C14.7,9.2 15.1,9.3 15.4,9.5C16.2,10 16.5,11.1 16.1,12.7C18.5,13.5 20.2,14.6 20.2,15.7Z"/>
                                </svg>
                                React Frontend
                            </h3>
                            <div class="text-gray-600 mt-2 text-sm">
                                • Family Tree Visualization<br>
                                • Interactive UI Components<br>
                                • Relationship Management<br>
                                • Media Gallery<br>
                                • User Authentication
                            </div>
                        </div>
                        <div class="text-3xl font-mono text-indigo-400">↔️</div>
                        <div class="bg-white p-6 rounded-xl shadow-md border w-full md:w-1/4 transform hover:scale-105 transition-transform">
                            <h3 class="text-xl font-semibold text-indigo-600 flex items-center justify-center">
                                <svg class="component-icon" fill="#CC0000" viewBox="0 0 24 24">
                                    <path d="M1.5,4.5L3,3L21,21L19.5,22.5L14.97,17.97C14.82,17.98 14.66,18 14.5,18C14.22,18 13.95,17.97 13.69,17.93L12.41,16.65C12.28,16.87 12.15,17.08 12,17.28C11.85,17.08 11.72,16.87 11.59,16.65L10.31,17.93C10.05,17.97 9.78,18 9.5,18C9.34,18 9.18,17.98 9.03,17.97L4.5,13.44C4.5,13.63 4.53,13.81 4.57,14L6.68,15.61C6.87,15.76 6.92,16.03 6.8,16.25L4.8,19.71C4.68,19.93 4.41,20.02 4.19,19.93L1.7,18.93C1.48,18.84 1.41,18.57 1.53,18.35L3.53,14.89C3.65,14.67 3.92,14.58 4.14,14.67L5.63,15.19C5.55,14.83 5.5,14.44 5.5,14C5.5,13.67 5.53,13.34 5.57,13.03L3.46,11.37C3.27,11.22 3.22,10.95 3.34,10.73L5.34,7.27C5.46,7.05 5.73,6.96 5.95,7.05L8.44,8.05C8.96,7.66 9.5,7.32 10.13,7.07L10.5,4ZM12,8.5A3.5,3.5 0 0,0 8.5,12A3.5,3.5 0 0,0 12,15.5A3.5,3.5 0 0,0 15.5,12A3.5,3.5 0 0,0 12,8.5Z"/>
                                </svg>
                                Rails API Backend
                            </h3>
                            <div class="text-gray-600 mt-2 text-sm">
                                • RESTful API Endpoints<br>
                                • Business Logic<br>
                                • Authentication & Security<br>
                                • File Management<br>
                                • Data Serialization
                            </div>
                        </div>
                        <div class="text-3xl font-mono text-indigo-400">↔️</div>
                        <div class="bg-white p-6 rounded-xl shadow-md border w-full md:w-1/4 transform hover:scale-105 transition-transform">
                            <h3 class="text-xl font-semibold text-indigo-600 flex items-center justify-center">
                                <svg class="component-icon" fill="#336791" viewBox="0 0 24 24">
                                    <path d="M12,3C7.58,3 4,4.79 4,7C4,9.21 7.58,11 12,11C16.42,11 20,9.21 20,7C20,4.79 16.42,3 12,3M4,9V12C4,14.21 7.58,16 12,16C16.42,16 20,14.21 20,12V9C20,11.21 16.42,13 12,13C7.58,13 4,11.21 4,9M4,14V17C4,19.21 7.58,21 12,21C16.42,21 20,19.21 20,17V14C20,16.21 16.42,18 12,18C7.58,18 4,16.21 4,14Z"/>
                                </svg>
                                PostgreSQL Database
                            </h3>
                            <div class="text-gray-600 mt-2 text-sm">
                                • People & Relationships<br>
                                • Media Metadata<br>
                                • Timeline Events<br>
                                • User Accounts<br>
                                • Active Storage Blobs
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Database Schema -->
            <section>
                <h2 class="text-3xl font-bold text-gray-800 flex items-center border-b-2 border-indigo-200 pb-3 mb-6">
                    <svg class="section-title-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375" /></svg>
                    Database Schema Design
                </h2>
                
                <!-- FK Relationship Overview -->
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6">
                    <h3 class="text-lg font-semibold text-blue-800 mb-4 flex items-center">
                        <svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244" />
                        </svg>
                        Foreign Key Relationships
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div class="bg-white p-4 rounded-lg shadow">
                            <h4 class="font-semibold text-gray-800 mb-2">One-to-Many Relationships:</h4>
                            <ul class="space-y-1 text-gray-600">
                                <li>• <strong>users</strong> → <strong>people</strong> (user_id FK)</li>
                                <li>• <strong>people</strong> → <strong>profiles</strong> (person_id FK)</li>
                                <li>• <strong>people</strong> → <strong>timeline_items</strong> (person_id FK)</li>
                                <li>• <strong>people</strong> → <strong>facts</strong> (person_id FK)</li>
                            </ul>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow">
                            <h4 class="font-semibold text-gray-800 mb-2">Many-to-Many Relationships:</h4>
                            <ul class="space-y-1 text-gray-600">
                                <li>• <strong>people</strong> ↔ <strong>relationships</strong> ↔ <strong>people</strong></li>
                                <li>• <strong>people/relationships</strong> → <strong>media</strong> (polymorphic)</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Users Table -->
                    <div class="bg-white rounded-lg shadow-md border overflow-hidden">
                        <div class="bg-gray-700 text-white p-3 font-semibold flex items-center"><svg class="table-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" /></svg>users</div>
                        <ul class="divide-y divide-gray-200 font-mono text-sm">
                            <li class="p-3 bg-indigo-50 font-bold">id (PK)</li>
                            <li class="p-3">email</li>
                            <li class="p-3">name</li>
                            <li class="p-3">encrypted_password</li>
                            <li class="p-3">created_at</li>
                            <li class="p-3">updated_at</li>
                        </ul>
                     
                    </div>
                    <!-- People Table -->
                    <div class="bg-white rounded-lg shadow-md border overflow-hidden">
                        <div class="bg-gray-700 text-white p-3 font-semibold flex items-center"><svg class="table-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" /></svg>people</div>
                        <ul class="divide-y divide-gray-200 font-mono text-sm">
                            <li class="p-3 bg-indigo-50 font-bold">id (PK)</li>
                            <li class="p-3 bg-yellow-50">user_id (FK)</li>
                            <li class="p-3">first_name</li>
                            <li class="p-3">last_name</li>
                            <li class="p-3">gender</li>
                            <li class="p-3">date_of_birth</li>
                            <li class="p-3">date_of_death</li>
                            <li class="p-3">is_deceased</li>
                            <li class="p-3">created_at</li>
                            <li class="p-3">updated_at</li>
                        </ul>
                    </div>
                    <!-- Relationships Table -->
                    <div class="bg-white rounded-lg shadow-md border overflow-hidden">
                        <div class="bg-gray-700 text-white p-3 font-semibold flex items-center"><svg class="table-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m-3.74-2.72a3 3 0 0 0-4.682 2.72 9.094 9.094 0 0 0 3.742.479m-4.682-2.72a3 3 0 0 0-4.682-2.72m5.682 5.44a3 3 0 0 1-5.682 0m5.682 0a3 3 0 0 1 5.682 0M3 3l3.057 3.057m0 0a3 3 0 0 0 4.242 0 3 3 0 0 0 0-4.242M6.057 6.057a3 3 0 0 0-4.242 0 3 3 0 0 0 0 4.242m15-4.242a3 3 0 0 0-4.242 0 3 3 0 0 0 0 4.242m-4.242 4.242a3 3 0 0 1 4.242 0 3 3 0 0 1 0 4.242m-4.242-4.242L9 18" /></svg>relationships</div>
                        <ul class="divide-y divide-gray-200 font-mono text-sm">
                            <li class="p-3 bg-indigo-50 font-bold">id (PK)</li>
                            <li class="p-3 bg-yellow-50">person_id (FK)</li>
                            <li class="p-3 bg-yellow-50">relative_id (FK)</li>
                            <li class="p-3">relationship_type</li>
                            <li class="p-3">is_ex</li>
                            <li class="p-3">is_deceased</li>
                            <li class="p-3">created_at</li>
                            <li class="p-3">updated_at</li>
                        </ul>
                    </div>
                    <!-- Media Table -->
                    <div class="bg-white rounded-lg shadow-md border overflow-hidden">
                        <div class="bg-gray-700 text-white p-3 font-semibold flex items-center"><svg class="table-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" /></svg>media</div>
                        <ul class="divide-y divide-gray-200 font-mono text-sm">
                            <li class="p-3 bg-indigo-50 font-bold">id (PK)</li>
                            <li class="p-3 bg-yellow-50">attachable_id (FK)</li>
                            <li class="p-3">attachable_type</li>
                            <li class="p-3">title</li>
                            <li class="p-3">description</li>
                            <li class="p-3">created_at</li>
                            <li class="p-3">updated_at</li>
                        </ul>
                    </div>
                    <!-- Additional Tables -->
                    <div class="bg-white rounded-lg shadow-md border overflow-hidden">
                        <div class="bg-gray-700 text-white p-3 font-semibold flex items-center">
                            <svg class="table-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                            </svg>
                            profiles
                        </div>
                        <ul class="divide-y divide-gray-200 font-mono text-sm">
                            <li class="p-3 bg-indigo-50 font-bold">id (PK)</li>
                            <li class="p-3 bg-yellow-50">person_id (FK)</li>
                            <li class="p-3">created_at</li>
                            <li class="p-3">updated_at</li>
                        </ul>
                    </div>
                    <div class="bg-white rounded-lg shadow-md border overflow-hidden">
                        <div class="bg-gray-700 text-white p-3 font-semibold flex items-center">
                            <svg class="table-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5" />
                            </svg>
                            timeline_items
                        </div>
                        <ul class="divide-y divide-gray-200 font-mono text-sm">
                            <li class="p-3 bg-indigo-50 font-bold">id (PK)</li>
                            <li class="p-3 bg-yellow-50">person_id (FK)</li>
                            <li class="p-3">title</li>
                            <li class="p-3">date</li>
                            <li class="p-3">place</li>
                            <li class="p-3">icon</li>
                            <li class="p-3">description</li>
                        </ul>
                    </div>
                    <div class="bg-white rounded-lg shadow-md border overflow-hidden">
                        <div class="bg-gray-700 text-white p-3 font-semibold flex items-center">
                            <svg class="table-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
                            </svg>
                            facts
                        </div>
                        <ul class="divide-y divide-gray-200 font-mono text-sm">
                            <li class="p-3 bg-indigo-50 font-bold">id (PK)</li>
                            <li class="p-3 bg-yellow-50">person_id (FK)</li>
                            <li class="p-3">label</li>
                            <li class="p-3">value</li>
                            <li class="p-3">date</li>
                            <li class="p-3">location</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- User Workflow -->
            <section>
                <h2 class="text-3xl font-bold text-gray-800 flex items-center border-b-2 border-indigo-200 pb-3 mb-6">
                    <svg class="section-title-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM12 2.25V4.5m5.834.166-1.591 1.591M20.25 10.5H18M5.834 4.666l-1.591-1.591M4.75 10.5H3.25m13.5 0-4.243 4.243-4.242-4.242M12 18.75V16.5" /></svg>
                    User Workflow
                </h2>
                <div class="bg-gray-50 p-6 rounded-xl border border-gray-200">
                    <div class="flex flex-col items-center space-y-4">
                        <div class="bg-indigo-500 text-white font-semibold py-3 px-6 rounded-full shadow-lg flex items-center"><svg class="flow-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0h3m-3 0-3-3m3 3-3 3" /></svg>Register / Login</div>
                        <div class="text-2xl text-indigo-400">↓</div>
                        <div class="bg-indigo-500 text-white font-semibold py-3 px-6 rounded-full shadow-lg flex items-center"><svg class="flow-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z" /></svg>Add Family Members</div>
                        <div class="text-2xl text-indigo-400">↓</div>
                        <div class="bg-indigo-500 text-white font-semibold py-3 px-6 rounded-full shadow-lg flex items-center"><svg class="flow-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z" /></svg>Define Relationships</div>
                        <div class="text-2xl text-indigo-400">↓</div>
                        <div class="bg-indigo-500 text-white font-semibold py-3 px-6 rounded-full shadow-lg flex items-center"><svg class="flow-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z" /></svg>Upload Media</div>
                        <div class="text-2xl text-indigo-400">↓</div>
                        <div class="bg-indigo-500 text-white font-semibold py-3 px-6 rounded-full shadow-lg flex items-center"><svg class="flow-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 0 1 .865-.501 48.172 48.172 0 0 0 3.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z" /></svg>Visualize & Share</div>
                        <div class="text-2xl text-indigo-400">↓</div>
                    </div>
                </div>
            </section>

            <!-- Relationship Types -->
            <section>
                <h2 class="text-3xl font-bold text-gray-800 flex items-center border-b-2 border-indigo-200 pb-3 mb-6">
                    <svg class="section-title-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m-3.74-2.72a3 3 0 0 0-4.682 2.72 9.094 9.094 0 0 0 3.742.479m-4.682-2.72a3 3 0 0 0-4.682-2.72m5.682 5.44a3 3 0 0 1-5.682 0m5.682 0a3 3 0 0 1 5.682 0M3 3l3.057 3.057m0 0a3 3 0 0 0 4.242 0 3 3 0 0 0 0-4.242M6.057 6.057a3 3 0 0 0-4.242 0 3 3 0 0 0 0 4.242m15-4.242a3 3 0 0 0-4.242 0 3 3 0 0 0 0 4.242m-4.242 4.242a3 3 0 0 1 4.242 0 3 3 0 0 1 0 4.242m-4.242-4.242L9 18" /></svg>
                    Relationship Types Supported
                </h2>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 text-center">
                    <div class="bg-rose-100 text-rose-800 p-4 rounded-lg shadow">
                        <svg class="relationship-icon inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" />
                        </svg>
                        <h4 class="font-semibold">Blood Relations</h4>
                        <p class="text-xs mt-1">Parent, Child, Grandparent, Great-Grandparent, Sibling, Uncle, Aunt, Cousin</p>
                    </div>
                    <div class="bg-cyan-100 text-cyan-800 p-4 rounded-lg shadow">
                        <svg class="relationship-icon inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z" />
                        </svg>
                        <h4 class="font-semibold">Step Relations</h4>
                        <p class="text-xs mt-1">Step-Parent, Step-Child, Step-Sibling, Step-Grandparent (through marriage)</p>
                    </div>
                    <div class="bg-amber-100 text-amber-800 p-4 rounded-lg shadow">
                        <svg class="relationship-icon inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" />
                        </svg>
                        <h4 class="font-semibold">Half Relations</h4>
                        <p class="text-xs mt-1">Half-Sibling (sharing one biological parent)</p>
                    </div>
                    <div class="bg-lime-100 text-lime-800 p-4 rounded-lg shadow">
                        <svg class="relationship-icon inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" />
                        </svg>
                        <h4 class="font-semibold">In-Law Relations</h4>
                        <p class="text-xs mt-1">Father-in-Law, Mother-in-Law, Brother-in-Law, Sister-in-Law</p>
                    </div>
                    <div class="bg-fuchsia-100 text-fuchsia-800 p-4 rounded-lg shadow">
                        <svg class="relationship-icon inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636" />
                        </svg>
                        <h4 class="font-semibold">Ex Relations</h4>
                        <p class="text-xs mt-1">Ex-Spouse, Ex-Father-in-Law, Ex-Mother-in-Law</p>
                    </div>
                    <div class="bg-gray-200 text-gray-800 p-4 rounded-lg shadow">
                        <svg class="relationship-icon inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                        </svg>
                        <h4 class="font-semibold">Deceased Relations</h4>
                        <p class="text-xs mt-1">All relationship types with temporal validation</p>
                    </div>
                </div>
            </section>

            <!-- API Endpoints -->
            <section>
                <h2 class="text-3xl font-bold text-gray-800 flex items-center border-b-2 border-indigo-200 pb-3 mb-6">
                    <svg class="section-title-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5" />
                    </svg>
                    API Endpoints Structure
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 font-mono text-sm">
                    <div class="bg-white rounded-lg shadow-md border">
                        <div class="bg-gray-100 p-3 font-semibold border-b flex items-center"><svg class="api-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" /></svg>People Management</div>
                        <ul class="divide-y divide-gray-200">
                            <li class="p-3 flex items-center"><span class="http-method text-center font-bold text-white bg-green-500 rounded-md py-1 px-2 mr-4">GET</span> /api/v1/people</li>
                            <li class="p-3 flex items-center"><span class="http-method text-center font-bold text-white bg-blue-500 rounded-md py-1 px-2 mr-4">POST</span> /api/v1/people</li>
                            <li class="p-3 flex items-center"><span class="http-method text-center font-bold text-white bg-yellow-500 rounded-md py-1 px-2 mr-4">PUT</span> /api/v1/people/:id</li>
                            <li class="p-3 flex items-center"><span class="http-method text-center font-bold text-white bg-red-500 rounded-md py-1 px-2 mr-4">DELETE</span> /api/v1/people/:id</li>
                        </ul>
                    </div>
                    <div class="bg-white rounded-lg shadow-md border">
                        <div class="bg-gray-100 p-3 font-semibold border-b flex items-center"><svg class="api-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m-3.74-2.72a3 3 0 0 0-4.682 2.72 9.094 9.094 0 0 0 3.742.479m-4.682-2.72a3 3 0 0 0-4.682-2.72m5.682 5.44a3 3 0 0 1-5.682 0m5.682 0a3 3 0 0 1 5.682 0M3 3l3.057 3.057m0 0a3 3 0 0 0 4.242 0 3 3 0 0 0 0-4.242M6.057 6.057a3 3 0 0 0-4.242 0 3 3 0 0 0 0 4.242m15-4.242a3 3 0 0 0-4.242 0 3 3 0 0 0 0 4.242m-4.242 4.242a3 3 0 0 1 4.242 0 3 3 0 0 1 0 4.242m-4.242-4.242L9 18" /></svg>Relationships</div>
                        <ul class="divide-y divide-gray-200">
                            <li class="p-3 flex items-center"><span class="http-method text-center font-bold text-white bg-green-500 rounded-md py-1 px-2 mr-4">GET</span> /api/v1/relationships</li>
                            <li class="p-3 flex items-center"><span class="http-method text-center font-bold text-white bg-blue-500 rounded-md py-1 px-2 mr-4">POST</span> /api/v1/relationships</li>
                            <li class="p-3 flex items-center"><span class="http-method text-center font-bold text-white bg-red-500 rounded-md py-1 px-2 mr-4">DELETE</span> /api/v1/relationships/:id</li>
                        </ul>
                    </div>
                    <div class="bg-white rounded-lg shadow-md border">
                        <div class="bg-gray-100 p-3 font-semibold border-b flex items-center"><svg class="api-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" /></svg>Media Management</div>
                        <ul class="divide-y divide-gray-200">
                            <li class="p-3 flex items-center"><span class="http-method text-center font-bold text-white bg-green-500 rounded-md py-1 px-2 mr-4">GET</span> /api/v1/people/:id/media</li>
                            <li class="p-3 flex items-center"><span class="http-method text-center font-bold text-white bg-blue-500 rounded-md py-1 px-2 mr-4">POST</span> /api/v1/people/:id/media</li>
                            <li class="p-3 flex items-center"><span class="http-method text-center font-bold text-white bg-yellow-500 rounded-md py-1 px-2 mr-4">PUT</span> /api/v1/media/:id</li>
                            <li class="p-3 flex items-center"><span class="http-method text-center font-bold text-white bg-red-500 rounded-md py-1 px-2 mr-4">DELETE</span> /api/v1/media/:id</li>
                        </ul>
                    </div>
                    <div class="bg-white rounded-lg shadow-md border">
                        <div class="bg-gray-100 p-3 font-semibold border-b flex items-center"><svg class="api-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z" /></svg>Authentication</div>
                        <ul class="divide-y divide-gray-200">
                            <li class="p-3 flex items-center"><span class="http-method text-center font-bold text-white bg-blue-500 rounded-md py-1 px-2 mr-4">POST</span> /api/v1/auth/login</li>
                            <li class="p-3 flex items-center"><span class="http-method text-center font-bold text-white bg-blue-500 rounded-md py-1 px-2 mr-4">POST</span> /api/v1/auth/register</li>
                            <li class="p-3 flex items-center"><span class="http-method text-center font-bold text-white bg-red-500 rounded-md py-1 px-2 mr-4">DELETE</span> /api/v1/auth/logout</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Technology Stack -->
            <section>
                <h2 class="text-3xl font-bold text-gray-800 flex items-center border-b-2 border-indigo-200 pb-3 mb-6">
                    <svg class="section-title-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M22.5,18.5C22.5,19.33 21.83,20 21,20H3C2.17,20 1.5,19.33 1.5,18.5V5.5C1.5,4.67 2.17,4 3,4H21C21.83,4 22.5,4.67 22.5,5.5V18.5M21,3H3A2,2 0 0,0 1,5V19A2,2 0 0,0 3,21H21A2,2 0 0,0 23,19V5A2,2 0 0,0 21,3Z"/>
                    </svg>
                    Technology Stack
                </h2>
                <div class="bg-gray-50 p-6 rounded-xl border border-gray-200">
                    <div class="flex flex-col md:flex-row items-center justify-around gap-8 text-center">
                        <div class="bg-white p-6 rounded-xl shadow-md border w-full md:w-1/3 transform hover:scale-105 transition-transform">
                            <h3 class="text-xl font-semibold text-indigo-600">Frontend</h3>
                            <div class="text-gray-600 mt-2 text-sm">
                                • React 18<br>
                                • React Flow<br>
                                • Tailwind CSS<br>
                                • Axios<br>
                                • React Router
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-md border w-full md:w-1/3 transform hover:scale-105 transition-transform">
                            <h3 class="text-xl font-semibold text-indigo-600">Backend</h3>
                            <div class="text-gray-600 mt-2 text-sm">
                                • Ruby on Rails 7<br>
                                • Active Storage<br>
                                • Devise Auth<br>
                                • Active Model Serializers<br>
                                • Sidekiq
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-md border w-full md:w-1/3 transform hover:scale-105 transition-transform">
                            <h3 class="text-xl font-semibold text-indigo-600">Database & Storage</h3>
                            <div class="text-gray-600 mt-2 text-sm">
                                • PostgreSQL<br>
                                • Active Storage<br>
                                • File System Storage<br>
                                • Image Processing<br>
                                • CORS Support
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Code Samples -->
            <section>
                <h2 class="text-3xl font-bold text-gray-800 flex items-center border-b-2 border-indigo-200 pb-3 mb-6">
                    <svg class="section-title-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5" />
                    </svg>
                    Key Code Implementation Samples
                </h2>
                
                <!-- React Component Sample -->
                <div class="bg-gray-50 p-6 rounded-xl border border-gray-200 mb-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                        <svg class="component-icon" fill="#61DAFB" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="2"/>
                            <path d="M20.2,15.7L20.2,15.7C20.2,16.8 18.5,17.9 16.1,18.7C16.5,20.3 16.2,21.4 15.4,21.9C15.1,22.1 14.7,22.2 14.3,22.2C13.5,22.2 12.6,21.6 11.8,20.5C11,21.6 10.1,22.2 9.3,22.2C8.9,22.2 8.5,22.1 8.2,21.9C7.4,21.4 7.1,20.3 7.5,18.7C5.1,17.9 3.4,16.8 3.4,15.7C3.4,14.6 5.1,13.5 7.5,12.7C7.1,11.1 7.4,10 8.2,9.5C8.5,9.3 8.9,9.2 9.3,9.2C10.1,9.2 11,9.8 11.8,10.9C12.6,9.8 13.5,9.2 14.3,9.2C14.7,9.2 15.1,9.3 15.4,9.5C16.2,10 16.5,11.1 16.1,12.7C18.5,13.5 20.2,14.6 20.2,15.7Z"/>
                        </svg>
                        React Component: Family Tree Node
                    </h3>
                    <pre class="bg-white p-4 rounded-lg overflow-x-auto font-mono text-sm border"><code>// CustomNode.jsx - Interactive family tree node component
import React, { memo } from 'react';
import { Handle, Position } from '@xyflow/react';
import Avatar from 'react-avatar';
import { FaPen, FaBullseye, FaMars, FaVenus } from 'react-icons/fa';

const CustomNode = ({ data, id, selected }) => {
  const { person, onEdit, onCenter, onPersonCardOpen } = data;
  const genderIcon = person.gender?.toLowerCase() === 'female' ? 
    &lt;FaVenus className="text-pink-500" /&gt; : 
    &lt;FaMars className="text-blue-500" /&gt;;
  
  const handleNodeClick = (e) => {
    if (e.target.closest('button')) return;
    onPersonCardOpen?.(person);
  };

  return (
    &lt;div className={`w-[170px] bg-white border rounded-xl shadow-md p-4 
                     cursor-pointer transition-all hover:shadow-lg 
                     ${selected ? 'ring-2 ring-blue-500' : ''}`}
         onClick={handleNodeClick}&gt;
      &lt;Handle type="target" position={Position.Top} className="opacity-0" /&gt;
      
      {/* Action buttons */}
      &lt;div className="absolute top-2 right-2 flex gap-1"&gt;
        &lt;button onClick={(e) => { e.stopPropagation(); onCenter(person); }}&gt;
          &lt;FaBullseye /&gt;
        &lt;/button&gt;
        &lt;button onClick={(e) => { e.stopPropagation(); onEdit(person); }}&gt;
          &lt;FaPen /&gt;
        &lt;/button&gt;
      &lt;/div&gt;

      {/* Avatar */}
      {person.avatar_url ? (
        &lt;img src={person.avatar_url} className="w-16 h-16 rounded-full mx-auto" /&gt;
      ) : (
        &lt;Avatar name={`${person.first_name} ${person.last_name}`} size="64" round /&gt;
      )}
      
      {/* Name with gender icon */}
      &lt;h3 className="font-semibold text-sm flex items-center justify-center"&gt;
        {person.first_name} {person.last_name} {genderIcon}
      &lt;/h3&gt;
      
      &lt;Handle type="source" position={Position.Bottom} className="opacity-0" /&gt;
    &lt;/div&gt;
  );
};

export default memo(CustomNode);</code></pre>
                </div>

                <!-- Rails API Sample -->
                <div class="bg-gray-50 p-6 rounded-xl border border-gray-200 mb-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                        <svg class="component-icon" fill="#CC0000" viewBox="0 0 24 24">
                            <path d="M1.5,4.5L3,3L21,21L19.5,22.5L14.97,17.97C14.82,17.98 14.66,18 14.5,18C14.22,18 13.95,17.97 13.69,17.93L12.41,16.65C12.28,16.87 12.15,17.08 12,17.28C11.85,17.08 11.72,16.87 11.59,16.65L10.31,17.93C10.05,17.97 9.78,18 9.5,18C9.34,18 9.18,17.98 9.03,17.97L4.5,13.44C4.5,13.63 4.53,13.81 4.57,14L6.68,15.61C6.87,15.76 6.92,16.03 6.8,16.25L4.8,19.71C4.68,19.93 4.41,20.02 4.19,19.93L1.7,18.93C1.48,18.84 1.41,18.57 1.53,18.35L3.53,14.89C3.65,14.67 3.92,14.58 4.14,14.67L5.63,15.19C5.55,14.83 5.5,14.44 5.5,14C5.5,13.67 5.53,13.34 5.57,13.03L3.46,11.37C3.27,11.22 3.22,10.95 3.34,10.73L5.34,7.27C5.46,7.05 5.73,6.96 5.95,7.05L8.44,8.05C8.96,7.66 9.5,7.32 10.13,7.07L10.5,4ZM12,8.5A3.5,3.5 0 0,0 8.5,12A3.5,3.5 0 0,0 12,15.5A3.5,3.5 0 0,0 15.5,12A3.5,3.5 0 0,0 12,8.5Z"/>
                        </svg>
                        Rails API: People Controller
                    </h3>
                    <pre class="bg-white p-4 rounded-lg overflow-x-auto font-mono text-sm border"><code># app/controllers/api/v1/people_controller.rb - Core relationship creation logic
class Api::V1::PeopleController < BaseController
  def create
    ActiveRecord::Base.transaction do
      person = current_user.people.build(person_params)
      rel_type = params[:person][:relation_type]
      rel_person_id = params[:person][:related_person_id]
      
      # Enforce relationship requirement for non-first person
      if !first_person? && (rel_type.blank? || rel_person_id.blank?)
        render json: { errors: ["Relationship required for new members"] }, 
               status: :unprocessable_entity
        raise ActiveRecord::Rollback
      end
      
      if person.save
        create_relationship(person, rel_type, rel_person_id) if rel_type.present?
        render json: person, serializer: Api::V1::PersonSerializer, status: :created
      else
        render json: { errors: person.errors.full_messages }, 
               status: :unprocessable_entity
        raise ActiveRecord::Rollback
      end
    end
  end

  private

  def create_relationship(person, rel_type, rel_person_id)
    related_person = current_user.people.find(rel_person_id)
    
    # Temporal validation for parent-child relationships
    if ['child', 'parent'].include?(rel_type)
      validation_result = validate_parent_child_relationship(person, related_person, rel_type)
      unless validation_result[:valid]
        render json: { errors: [validation_result[:error]] }, 
               status: :unprocessable_entity
        raise ActiveRecord::Rollback
      end
    end
    
    # Create bidirectional relationships
    case rel_type
    when 'child'
      create_parent_child_relationships(related_person, person)
    when 'parent'
      create_parent_child_relationships(person, related_person)
    when 'spouse'
      create_spouse_relationships(person, related_person)
    end
  end
end</code></pre>
                </div>

                <!-- Relationship Calculator Sample -->
                <div class="bg-gray-50 p-6 rounded-xl border border-gray-200 mb-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Relationship Calculator: Core Algorithm</h3>
                    <pre class="bg-white p-4 rounded-lg overflow-x-auto font-mono text-sm border"><code>// improvedRelationshipCalculator.js - Core genealogical relationship detection
// Core genealogical relationship detection with temporal validation

export const calculateRelationshipToRoot = (person, rootPerson, allPeople, relationships) => {
  if (!person || !rootPerson || person.id === rootPerson.id) {
    return person?.id === rootPerson?.id ? 'Root' : '';
  }

  // Temporal validation - check if people lived in different time periods
  const personBirth = person.date_of_birth ? new Date(person.date_of_birth) : null;
  const rootDeath = rootPerson.date_of_death ? new Date(rootPerson.date_of_death) : null;
  
  if (personBirth && rootDeath && personBirth > rootDeath) {
    // Only show biological connections across generations
    return findAncestorRelationship(person, rootPerson, relationships);
  }

  // Build relationship maps for efficient lookup
  const relationshipMaps = buildRelationshipMaps(relationships, allPeople);
  
  // Check relationships in order of specificity
  return checkDirectRelationship(person.id, rootPerson.id, relationshipMaps, allPeople) ||
         checkSiblingRelationship(person.id, rootPerson.id, relationshipMaps, allPeople) ||
         checkExtendedFamily(person.id, rootPerson.id, relationshipMaps, allPeople) ||
         checkInLawRelationship(person.id, rootPerson.id, relationshipMaps, allPeople) ||
         'Connected';
};

// Gender-specific relationship terms
function getGenderSpecificRelation(personId, maleType, femaleType, allPeople, fallback = null) {
  const person = allPeople.find(p => p.id === personId);
  const gender = person?.gender?.toLowerCase();
  
  if (gender === 'male') return maleType;
  if (gender === 'female') return femaleType;
  return fallback || maleType;
}

// Build efficient lookup maps for relationship traversal
function buildRelationshipMaps(relationships, allPeople) {
  const childToParents = new Map();
  const parentToChildren = new Map();
  const spouseMap = new Map();
  
  relationships.forEach(rel => {
    const personId = String(rel.person_id);
    const relativeId = String(rel.relative_id);
    
    if (rel.relationship_type === 'parent') {
      if (!childToParents.has(personId)) childToParents.set(personId, new Set());
      childToParents.get(personId).add(relativeId);
      
      if (!parentToChildren.has(relativeId)) parentToChildren.set(relativeId, new Set());
      parentToChildren.get(relativeId).add(personId);
    }
    
    if (rel.relationship_type === 'spouse') {
      if (!spouseMap.has(personId)) spouseMap.set(personId, new Set());
      spouseMap.get(personId).add(relativeId);
    }
  });
  
  return { childToParents, parentToChildren, spouseMap };
}</code></pre>
                </div>
            </section>

            <!-- Deployment Architecture -->
            <section>
                <h2 class="text-3xl font-bold text-gray-800 flex items-center border-b-2 border-indigo-200 pb-3 mb-6">
                    <svg class="section-title-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4,6H20V16H4M20,18A2,2 0 0,0 22,16V6C22,4.89 21.1,4 20,4H4C2.89,4 2,4.89 2,6V16A2,2 0 0,0 4,18H0V20H24V18H20Z"/>
                    </svg>
                    Deployment Architecture
                </h2>
                <div class="bg-gray-50 p-6 rounded-xl border border-gray-200">
                    <div class="flex flex-col md:flex-row items-center justify-around gap-8 text-center">
                        <div class="bg-white p-6 rounded-xl shadow-md border w-full md:w-1/4 transform hover:scale-105 transition-transform">
                            <h3 class="text-xl font-semibold text-green-600 flex items-center justify-center">
                                <svg class="component-icon" fill="#4CAF50" viewBox="0 0 24 24">
                                    <path d="M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z"/>
                                </svg>
                                Development
                            </h3>
                            <div class="text-gray-600 mt-2 text-sm">
                                • Local PostgreSQL<br>
                                • Rails Server (port 3000)<br>
                                • React Dev Server (port 3001)<br>
                                • File System Storage<br>
                                • Hot Module Replacement
                            </div>
                        </div>
                        <div class="text-3xl font-mono text-indigo-400">→</div>
                        <div class="bg-white p-6 rounded-xl shadow-md border w-full md:w-1/4 transform hover:scale-105 transition-transform">
                            <h3 class="text-xl font-semibold text-orange-600 flex items-center justify-center">
                                <svg class="component-icon" fill="#FF9800" viewBox="0 0 24 24">
                                    <path d="M4,1H20A1,1 0 0,1 21,2V6A1,1 0 0,1 20,7H4A1,1 0 0,1 3,6V2A1,1 0 0,1 4,1M4,9H20A1,1 0 0,1 21,10V14A1,1 0 0,1 20,15H4A1,1 0 0,1 3,14V10A1,1 0 0,1 4,9M4,17H20A1,1 0 0,1 21,18V22A1,1 0 0,1 20,23H4A1,1 0 0,1 3,22V18A1,1 0 0,1 4,17M5,2V6H19V2H5M5,10V14H19V10H5M5,18V22H19V18H5M7,4V4.5H9V4H7M7,12V12.5H9V12H7M7,20V20.5H9V20H7"/>
                                </svg>
                                Staging
                            </h3>
                            <div class="text-gray-600 mt-2 text-sm">
                                • Cloud PostgreSQL<br>
                                • Containerized Rails API<br>
                                • Static React Build<br>
                                • Cloud Storage (S3/GCS)<br>
                                • SSL Certificates
                            </div>
                        </div>
                        <div class="text-3xl font-mono text-indigo-400">→</div>
                        <div class="bg-white p-6 rounded-xl shadow-md border w-full md:w-1/4 transform hover:scale-105 transition-transform">
                            <h3 class="text-xl font-semibold text-blue-600 flex items-center justify-center">
                                <svg class="component-icon" fill="#2196F3" viewBox="0 0 24 24">
                                    <path d="M6.5,20Q4.22,20 2.61,18.43Q1,16.85 1,14.58Q1,12.63 2.17,11.1Q3.35,9.57 5.25,9.15Q5.88,6.85 7.75,5.43Q9.63,4 12,4Q14.93,4 16.96,6.04Q19,8.07 19,11Q20.73,11.2 21.86,12.5Q23,13.78 23,15.5A4.5,4.5 0 0,1 18.5,20H6.5Z"/>
                                </svg>
                                Production
                            </h3>
                            <div class="text-gray-600 mt-2 text-sm">
                                • Load Balancer<br>
                                • Multiple API Instances<br>
                                • CDN for Static Assets<br>
                                • Database Clustering<br>
                                • Monitoring & Logging
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-50 p-6 rounded-xl border border-gray-200 mt-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                        <svg class="component-icon" fill="#2496ED" viewBox="0 0 24 24">
                            <path d="M13.2,13.6H15.2V10.6H13.2V13.6M13.2,9.4H15.2V6.4H13.2V9.4M10.9,13.6H12.9V10.6H10.9V13.6M10.9,9.4H12.9V6.4H10.9V9.4M10.9,5.2H12.9V2.2H10.9V5.2M8.6,13.6H10.6V10.6H8.6V13.6M8.6,9.4H10.6V6.4H8.6V9.4M6.3,13.6H8.3V10.6H6.3V13.6M6.3,9.4H8.3V6.4H6.3V9.4M4,13.6H6V10.6H4V13.6M20,14.4C20,15.46 19.81,16.47 19.46,17.4C18.75,19.27 17.39,20.8 15.65,21.68C14.03,22.5 12.11,22.72 10.33,22.29C8.55,21.86 6.96,20.8 5.81,19.35C4.66,17.9 4,16.1 4,14.25H2L5,11L8,14.25H6C6,15.31 6.26,16.35 6.76,17.28C7.26,18.21 8,18.99 8.9,19.54C9.8,20.09 10.84,20.4 11.9,20.4C12.96,20.4 14,20.09 14.9,19.54C15.8,18.99 16.54,18.21 17.04,17.28C17.54,16.35 17.8,15.31 17.8,14.25C17.8,13.19 17.54,12.15 17.04,11.22C16.54,10.29 15.8,9.51 14.9,8.96C14,8.41 12.96,8.1 11.9,8.1C10.84,8.1 9.8,8.41 8.9,8.96L7.5,7.5C8.65,6.84 9.94,6.5 11.25,6.5C12.56,6.5 13.85,6.84 15,7.5C16.15,8.16 17.09,9.1 17.75,10.25C18.41,11.4 18.75,12.69 18.75,14C18.75,15.31 18.41,16.6 17.75,17.75C17.09,18.9 16.15,19.84 15,20.5C13.85,21.16 12.56,21.5 11.25,21.5C9.94,21.5 8.65,21.16 7.5,20.5C6.35,19.84 5.41,18.9 4.75,17.75C4.09,16.6 3.75,15.31 3.75,14C3.75,12.69 4.09,11.4 4.75,10.25C5.41,9.1 6.35,8.16 7.5,7.5C8.65,6.84 9.94,6.5 11.25,6.5V4.5C9.5,4.5 7.78,5 6.32,5.95C4.86,6.9 3.72,8.25 3.05,9.85C2.38,11.45 2.2,13.21 2.54,14.91C2.88,16.61 3.73,18.16 4.98,19.36C6.23,20.56 7.82,21.36 9.56,21.64C11.3,21.92 13.08,21.67 14.7,20.92C16.32,20.17 17.71,18.95 18.7,17.43C19.69,15.91 20.25,14.13 20.33,12.31H20C20,13.11 20,13.86 20,14.4Z"/>
                        </svg>
                        Docker Configuration Sample
                    </h3>
                    <pre class="bg-white p-4 rounded-lg overflow-x-auto font-mono text-sm border"><code># docker-compose.production.yml
version: '3.8'

services:
  database:
    image: postgres:15
    environment:
      POSTGRES_DB: chronicle_tree_production
      POSTGRES_USER: ${DATABASE_USER}
      POSTGRES_PASSWORD: ${DATABASE_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    networks:
      - app-network

  api:
    build:
      context: ./chronicle_tree_api
      dockerfile: Dockerfile.production
    environment:
      RAILS_ENV: production
      DATABASE_URL: postgresql://${DATABASE_USER}:${DATABASE_PASSWORD}@database:5432/chronicle_tree_production
      SECRET_KEY_BASE: ${SECRET_KEY_BASE}
    depends_on:
      - database
    networks:
      - app-network
    ports:
      - "3000:3000"

  frontend:
    build:
      context: ./chronicle_tree_client
      dockerfile: Dockerfile.production
    ports:
      - "80:80"
      - "443:443"
    depends_on:
      - api
    networks:
      - app-network

volumes:
  postgres_data:

networks:
  app-network:
    driver: bridge</code></pre>
                </div>
            </section>

            <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 text-center">
                <div class="flex items-center justify-center mb-2">
                    <svg class="w-6 h-6 text-blue-600 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3" />
                    </svg>
                    <strong class="text-blue-800">Responsive Design</strong>
                </div>
                <p class="text-blue-700">All diagrams and the application itself are designed to work seamlessly across desktop, tablet, and mobile devices with responsive layouts and touch-friendly interactions.</p>
            </div>
            
            <div class="bg-indigo-50 border border-indigo-200 rounded-lg p-6 text-center">
                <div class="flex items-center justify-center mb-2">
                    <svg class="w-6 h-6 text-indigo-600 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
                    </svg>
                    <strong class="text-indigo-800">Complete Architecture Coverage</strong>
                </div>
                <p class="text-indigo-700">This document provides comprehensive visual and code documentation covering system architecture, database design, user workflows, relationship types, API structures, technology stack, implementation samples, and deployment strategies for the ChronicleTree genealogy management system.</p>
            </div>

        </main>
    </div>
</body>
</html>